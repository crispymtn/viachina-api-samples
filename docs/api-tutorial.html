<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViaEurope Developer Documentation</title>

    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic'
          rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="http://developer.viaeurope.com/css/theme.css" type="text/css"/>
    <link rel="stylesheet" href="http://developer.viaeurope.com/css/theme-fixes.css" type="text/css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
</head>
<body class="wy-body-for-nav">

    <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
            <div class="wy-side-nav-search">
                <a href="http://developer.viaeurope.com/" class="fa fa-home"> ViaEurope Developer Documentation</a>
            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                                            <li class="toctree-l1 ">
                            <a class="reference internal "
                               href="http://developer.viaeurope.com/docs/api-tutorial.html">
                                API Tutorial
                            </a>
                        </li>
                                            <li class="toctree-l1 ">
                            <a class="reference internal "
                               href="http://developer.viaeurope.com/docs/api-attributes.html">
                                API Attribute Documentation
                            </a>
                        </li>
                                    </ul>
            </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                        <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="http://developer.viaeurope.com/">ViaEurope Developer Documentation</a>
            </nav>


                        <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="main" class="document">
                        <p>This document will tell you how to use the ViaEurope API, in order to create
orders and receive labels for your orders.</p>
<h1 id="setup">Setup</h1>
<p><strong>You will need an API key from ViaEurope to get started.</strong></p>
<h3 id="endpoints">Endpoints</h3>
<p>Your requests for testing our API must go to
<code>http://app-sandbox.viaeurope.com/api/v1/</code></p>
<p>When you're ready to proceed with using the API, you can direct your
requests to <code>http://app.viaeurope.com/api/v1/</code></p>
<p>Note that these two endpoints will require <em>different API keys</em>.</p>
<h3 id="authorization-amp-headers">Authorization &amp; Headers</h3>
<p>Your requests must include the following headers:</p>
<pre><code>Authorization: Token token="INSERT YOUR API KEY HERE"
Content-Type: application/json
Accept: application/json</code></pre>
<p>If you send no Authorization header or the wrong token, you will receive a <code>401 Unauthorized</code> response.</p>
<h1 id="creating-your-first-order">Creating your first order</h1>
<p>Send this example JSON via POST request to
<code>http://app-sandbox.viaeurope.com/api/v1/orders</code></p>
<pre><code>{
  "order": {
    "bag_number": "Bag 1",
    "client_reference": "74644043909723",
    "disposition": "sale",
    "hawb": "12345-EXAMPLE",
    "mawb": "123-12345675",
    "line_items": [
      {
        "description": "UV Lamp",
        "qty": 2,
        "weight": 400,
        "price": 1999,
        "parcel_number": 1,
        "taric_code": "8487905910",
        "ecommerce_url": "http://example.org/shop/product_12345ABC",
        "ecommerce_reference": "12345ABC"
      },
      {
        "description": "Water Glass",
        "qty": 1,
        "weight": 300,
        "price": 250,
        "parcel_number": 2,
        "taric_code": "8487905910",
        "ecommerce_url": "http://example.org/shop/product_12346BCD",
        "ecommerce_reference": "12346BCD"
      }
    ],
    "delivery": {
      "courier_name": "DPD",
      "courier_service": "DDP31",
      "registered": true,
      "name": "John Doe",
      "company": "John Doe Company",
      "street": "Example Street 42",
      "zip_code": "12345",
      "city": "Example Town",
      "country_code": "DE",
      "phone": "+4916012345678"
    }
  }
}</code></pre>
<p>If your request was successful, you will receive a <code>201 Created</code> response.
Otherwise there will be a <code>422 Unprocessable Entity</code> response with an <code>errors</code>
JSON explaining what went wrong. You will also receive the created order as
JSON:</p>
<pre><code>{
    "client_reference": "74644043909723",
    "reference": "VEOR3E70760A"
    "labels": [
        {
            "parcel_number": "1",
            "pdf": "http://...",
            "tracking_code": "09988540036769"
        }
    ],
    "hawb": "12345-EXAMPLE",
    "mawb": "123-12345675"
}</code></pre>
<p>You can inspect the <code>pdf</code> field of every object under <code>labels</code> to get a download
link to your order's labels. </p>
<h1 id="assigning-hawb-and-mawb-to-an-order">Assigning HAWB and MAWB to an order</h1>
<p>If you don't know HAWB and MAWB at the time you create the order, it is possible
to assign these two at a later date by doing an update.</p>
<p>Send the following example JSON via PUT request to
<code>http://app-sandbox.viaeurope.com/api/v1/orders/ORDER_CLIENT_REFERENCE</code>. Be sure
to replace <code>ORDER_CLIENT_REFERENCE</code> in the above URL with your reference for
this order. In the example above, it would be <code>74644043909723</code>, so the request
would go to <code>http://app-sandbox.viaeurope.com/api/v1/orders/74644043909723</code>.</p>
<p>Example JSON update to order, assigning HAWB and MAWB:</p>
<pre><code>{
  "order": {
    "hawb": "12345-EXAMPLE",
    "mawb": "123-12345675"
  }
}</code></pre>
<p>If your request was successful, you will receive a <code>204 No Content</code> response.
Otherwise there will be a <code>422 Unprocessable Entity</code> response with an <code>errors</code>
JSON explaining what went wrong.</p>
<h1 id="marking-an-hawb-as-quotready-to-shipquot">Marking an HAWB as &quot;ready to ship&quot;</h1>
<p>When you've created all orders belonging to a HAWB, and when you're ready to
ship that HAWB, you can mark it as &quot;ready&quot; by updating its volumetric weight
and its number of units to their correct values. That way, we will know that
you're now ready to ship an HAWB.</p>
<p>Send the following example JSON via PUT request to
<code>http://app-sandbox.viaeurope.com/api/v1/hawbs/HAWB_NUMBER</code>. Be sure
to replace <code>HAWB_NUMBER</code> in the above URL with the HAWB number you want to
update. In the example above, it would be <code>12345-EXAMPLE</code>, so the request
would go to <code>http://app-sandbox.viaeurope.com/api/v1/orders/12345-EXAMPLE</code>.</p>
<p>Example JSON update to HAWB: </p>
<pre><code>{
  "hawb": {
    "volumetric_weight": "1224",
    "number_of_units": "17"
  }
}</code></pre>
<p>This would update the HAWB information to reflect a volumetric weight of 1224
kg and 17 units (parcels/boxes/bags).</p>
<p>If your request was successful, you will receive a <code>204 No Content</code> response.
Otherwise there will be a <code>422 Unprocessable Entity</code> response with an <code>errors</code>
JSON explaining what went wrong.</p>
<p>Careful: after issuing this request, we will assume you are finished with
assigning orders to this HAWB and will proceed with announcing it to our
partners. You cannot add any additional orders to it after this step.</p>
                    </div>

                    <footer>
                        <hr/>
                                                    <div role="contentinfo">
                                <p>
                                    Find ViaEurope Developer Documentation on <a href="https://github.com/crispymtn/viaeurope-api-samples">GitHub</a>.
                                </p>
                            </div>
                                                Built with <a href="http://couscous.io/">Couscous</a> using a <a href="https://github.com/CouscousPHP/Template-ReadTheDocs">theme</a> based on <a href="https://readthedocs.org/">Read the Docs</a>.
                    </footer>

                </div>
            </div>

        </section>

    </div>

    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="http://developer.viaeurope.com/js/theme.js"></script>

    <script>
        $(function() {
            // Syntax highlighting
            hljs.initHighlightingOnLoad();
        });
    </script>

</body>
</html>
